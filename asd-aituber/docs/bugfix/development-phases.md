# 開発フェーズ計画書

最終更新: 2024-12-19

## 概要

ASD理解促進教育プラットフォームの開発を6つのフェーズに分けて実施します。全体期間は約8ヶ月を想定し、Phase 4完了時点でMVP（Minimum Viable Product）をリリース可能な状態とします。

## 開発フェーズ概要

| フェーズ | 期間 | 主要成果物 |
|---------|------|-----------|
| Phase 1: 基盤構築 | 3週間 | 開発環境、通信基盤、フロントエンド基盤 |
| Phase 2: VRM統合 | 3週間 | 3Dアバター表示、基本アニメーション |
| Phase 3: コア機能 | 4週間 | ASD/NTモード、Python NLP統合 |
| Phase 4: AI統合 | 4週間 | LLM統合、10シナリオ実装（**MVP完成**） |
| Phase 5: 音声・感情 | 4週間 | 音声合成、高度な感情表現 |
| Phase 6: 品質向上 | 4週間 | テスト、最適化、リリース準備 |

## Phase 1: 基盤構築（3週間）

### 目的
開発環境の構築とコアアーキテクチャの確立

### Week 1: 環境構築
- [ ] 開発環境セットアップ
  - [ ] Docker環境構築
  - [ ] TypeScript/Node.js設定
  - [ ] Python/FastAPI設定
- [ ] モノレポ構成
  - [ ] pnpm workspace設定
  - [ ] 共有パッケージ構造
- [ ] CI/CD基盤
  - [ ] GitHub Actions設定
  - [ ] 自動テスト環境
  - [ ] Linter/Formatter設定
- [ ] 基本的なプロジェクト構造確立

### Week 2: 通信基盤
- [ ] WebSocketサーバー実装
  - [ ] Socket.IO統合
  - [ ] 接続管理
  - [ ] イベントハンドリング
- [ ] TypeScript⇔Python API連携
  - [ ] REST API基本実装
  - [ ] 型定義の共有システム
  - [ ] エラーハンドリング
- [ ] 基本的なメッセージングシステム
- [ ] ロギングシステム構築

### Week 3: フロントエンド基盤
- [ ] Next.js基本セットアップ
  - [ ] App Router設定
  - [ ] 基本レイアウト
  - [ ] ルーティング設計
- [ ] UIコンポーネントライブラリ
  - [ ] 基本コンポーネント作成
  - [ ] Tailwind CSS設定
  - [ ] デザインシステム基盤
- [ ] アクセシビリティ基盤
  - [ ] WCAG 2.1 Level AA準拠設定
  - [ ] スクリーンリーダー対応
  - [ ] キーボードナビゲーション
- [ ] 状態管理（Zustand）セットアップ

### 成果物
- 動作する開発環境
- TypeScript⇔Python通信のHello World
- 基本的なUIフレームワーク

## Phase 2: VRMモデル統合（3週間）

### 目的
3Dアバターの表示と基本的なインタラクションの実装

### Week 4-5: VRM実装
- [ ] Three.js統合
  - [ ] シーン設定
  - [ ] レンダラー最適化
  - [ ] ライティング設定
- [ ] @pixiv/three-vrm統合
  - [ ] VRMローダー実装
  - [ ] モデル管理システム
  - [ ] エラーハンドリング
- [ ] 基本的な表情制御
  - [ ] ブレンドシェイプ制御
  - [ ] プリセット表情
- [ ] カメラ制御
  - [ ] 視点切り替え
  - [ ] ズーム機能

### Week 6: アニメーション
- [ ] 待機モーション実装
  - [ ] 呼吸アニメーション
  - [ ] まばたき
  - [ ] 微細な動き
- [ ] 話すモーション実装
  - [ ] 身振り手振り
  - [ ] 頭の動き
- [ ] 表情変化システム
  - [ ] 感情に応じた表情
  - [ ] トランジション
- [ ] リップシンク準備
  - [ ] 音素解析基盤
  - [ ] 口の動き制御

### 成果物
- VRMモデルが表示される画面
- 基本的なアニメーション動作
- 表情変化デモ

## Phase 3: コア機能実装（4週間）

### 目的
ASD/NTモードの基本動作を実現

### Week 7-8: モード切り替え
- [ ] ASD/NTモード切り替えUI
  - [ ] トグルスイッチ
  - [ ] モード説明表示
  - [ ] ビジュアルフィードバック
- [ ] 基本的な会話ロジック
  - [ ] メッセージ処理フロー
  - [ ] 応答生成基盤
- [ ] モード別応答パターン
  - [ ] ASDモード特性実装
  - [ ] NTモード特性実装
  - [ ] 違いの可視化
- [ ] 状態管理の拡張

### Week 9-10: Python NLP統合
- [ ] FastAPIサーバー構築
  - [ ] エンドポイント設計
  - [ ] バリデーション
  - [ ] ドキュメント自動生成
- [ ] 日本語形態素解析
  - [ ] SudachiPy統合
  - [ ] 辞書設定
  - [ ] カスタム辞書
- [ ] 基本的な感情分析
  - [ ] oseti統合
  - [ ] 感情スコアリング
  - [ ] 極性判定
- [ ] 慣用句検出システム
  - [ ] パターンマッチング
  - [ ] 字義通り変換
  - [ ] データベース構築

### 成果物
- ASD/NTモードで異なる応答
- 日本語テキスト解析API
- 慣用句の自動検出

## Phase 4: AI統合とMVP完成（4週間）

### 目的
最小限の動作可能な製品（MVP）の完成

### Week 11-12: LLM統合
- [ ] Claude/GPT API統合
  - [ ] API クライアント実装
  - [ ] レート制限対応
  - [ ] エラーリトライ
- [ ] プロンプトエンジニアリング
  - [ ] 基本プロンプト設計
  - [ ] パラメータ調整
  - [ ] 応答フォーマット
- [ ] ASD/NT別プロンプト実装
  - [ ] ASDモード用プロンプト
  - [ ] NTモード用プロンプト
  - [ ] 文脈管理
- [ ] レスポンス最適化
  - [ ] ストリーミング対応
  - [ ] キャッシング戦略

### Week 13-14: 10シナリオ実装
- [ ] 初期10シナリオの作成
  - [ ] 「ちょっと待って」の解釈
  - [ ] 「適当にやっておいて」
  - [ ] 褒め言葉の裏の意味
  - [ ] その他7シナリオ
- [ ] シナリオ管理システム
  - [ ] データ構造設計
  - [ ] CRUD操作
  - [ ] バージョン管理
- [ ] 学習進捗トラッキング
  - [ ] 進捗記録
  - [ ] 統計情報
  - [ ] レポート生成
- [ ] 基本的なクイズ機能
  - [ ] 問題生成
  - [ ] 採点システム
  - [ ] フィードバック

### 成果物
- **動作するMVP**
- AIとの対話機能
- 10個の学習シナリオ
- 基本的な学習体験

## Phase 5: 音声・感情システム（4週間）

### 目的
より自然で豊かな対話体験の実現

### Week 15-16: 音声合成
- [ ] VOICEVOX統合
  - [ ] API接続
  - [ ] 話者選択
  - [ ] パラメータ調整
- [ ] 音声ストリーミング
  - [ ] リアルタイム再生
  - [ ] バッファリング
  - [ ] 同期制御
- [ ] リップシンク実装
  - [ ] 音素解析
  - [ ] 口形状マッピング
  - [ ] タイミング調整
- [ ] 音声入力準備
  - [ ] Web Speech API
  - [ ] 音声認識設定

### Week 17-18: 高度な感情表現
- [ ] 内部感情vs外部表現の実装
  - [ ] 感情モデル設計
  - [ ] 内外分離ロジック
  - [ ] 可視化システム
- [ ] 感情の可視化UI
  - [ ] 感情メーター
  - [ ] グラフ表示
  - [ ] アニメーション
- [ ] PCM基本実装
  - [ ] Thinkerタイプ実装
  - [ ] パーソナリティ切り替え
  - [ ] 特性の反映
- [ ] ストレスレベル表示
  - [ ] ストレス計算
  - [ ] 段階表示
  - [ ] 行動変化

### 成果物
- 音声付き対話
- 感情表現豊かなアバター
- PCMパーソナリティ（Thinker）

## Phase 6: 品質向上とリリース準備（4週間）

### 目的
本番環境への投入準備と品質保証

### Week 19-20: テストと最適化
- [ ] 統合テスト実装
  - [ ] E2Eテスト
  - [ ] API統合テスト
  - [ ] UIテスト
- [ ] パフォーマンス最適化
  - [ ] レンダリング最適化
  - [ ] バンドルサイズ削減
  - [ ] キャッシング実装
- [ ] アクセシビリティ検証
  - [ ] WCAG準拠確認
  - [ ] スクリーンリーダーテスト
  - [ ] キーボード操作確認
- [ ] セキュリティ監査
  - [ ] 脆弱性スキャン
  - [ ] ペネトレーションテスト
  - [ ] APIセキュリティ

### Week 21-22: パイロット版準備
- [ ] ドキュメント整備
  - [ ] ユーザーガイド
  - [ ] API仕様書更新
  - [ ] 運用マニュアル
- [ ] デプロイメント設定
  - [ ] 本番環境構築
  - [ ] CI/CDパイプライン
  - [ ] 監視設定
- [ ] フィードバックシステム
  - [ ] フィードバックフォーム
  - [ ] 分析ダッシュボード
  - [ ] 改善プロセス
- [ ] 限定公開準備
  - [ ] ユーザー登録システム
  - [ ] アクセス制御
  - [ ] 利用規約・プライバシーポリシー

### 成果物
- 本番投入可能な品質
- 完全なドキュメント
- デプロイメント環境

## リスクと対策

### 技術的リスク
| リスク | 影響度 | 対策 |
|--------|--------|------|
| WebSocket接続の不安定性 | 高 | 再接続ロジック、フォールバック実装 |
| 日本語NLP精度不足 | 中 | 継続的なデータ収集、手動レビュー |
| レスポンス遅延 | 高 | キャッシング、最適化、CDN活用 |

### スケジュールリスク
| リスク | 影響度 | 対策 |
|--------|--------|------|
| LLM API変更 | 中 | 抽象化レイヤー、複数プロバイダー対応 |
| 機能スコープ拡大 | 高 | MVP優先、段階的リリース |
| テスト期間不足 | 中 | 自動テスト強化、早期テスト開始 |

## 成功指標

### Phase 4（MVP）時点
- [ ] 基本的な対話が可能
- [ ] ASD/NTモードの違いが体験できる
- [ ] 10シナリオが動作する
- [ ] レスポンス時間 < 3秒

### Phase 6（リリース）時点
- [ ] 同時接続100ユーザー対応
- [ ] 稼働率99%以上
- [ ] アクセシビリティAAA準拠
- [ ] ユーザー満足度4.0/5.0以上

## 次のアクション

1. Phase 1の詳細タスクリスト作成
2. 開発環境のセットアップ開始
3. 技術検証（WebSocket性能、VRM描画）
4. 初期チームミーティング

---

**更新履歴**
- 2024-12-19: 初版作成